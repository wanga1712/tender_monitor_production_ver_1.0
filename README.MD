# TenderMonitor

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–Ω–¥–µ—Ä–∞—Ö –∏–∑ –ï–¥–∏–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ —Å—Ñ–µ—Ä–µ –∑–∞–∫—É–ø–æ–∫ (–ï–ò–°).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

TenderMonitor - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä–∞—è:

- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ï–ò–° —á–µ—Ä–µ–∑ SOAP API
- –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç XML-—Ñ–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ç–µ–Ω–¥–µ—Ä–∞—Ö
- –ü–∞—Ä—Å–∏—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –û–ö–ü–î –∫–æ–¥–∞–º –∏ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –ø–æ 44-–§–ó –∏ 223-–§–ó

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ï–ò–°
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 44-–§–ó –∏ 223-–§–ó
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ XML-—Ñ–∞–π–ª–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ç–µ–Ω–¥–µ—Ä–∞—Ö
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –û–ö–ü–î –∫–æ–¥–∞–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Å–µ–º —Ä–µ–≥–∏–æ–Ω–∞–º –†–æ—Å—Å–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–£–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –≤ —Ñ–∞–π–ª, –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∫–æ–Ω—Å–æ–ª—å
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∑–∞ —Å—á–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ç—Ä–µ–π—Å–∞–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ï–ò–° —á–µ—Ä–µ–∑ **stunnel** (–±–µ–∑ nginx-–ø—Ä–æ–∫—Å–∏)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** - –ø–µ—Ä–µ–Ω–æ—Å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤ 22:00
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º (–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏, –Ω–µ—è—Å–Ω—ã–π, –†–∞–∑—ã–≥—Ä–∞–Ω–Ω—ã–µ)
- ‚úÖ **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –±—ç–∫–∞–ø –ë–î** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º
- ‚úÖ **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.9+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **psycopg2** - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
- **lxml** - –ø–∞—Ä—Å–∏–Ω–≥ XML
- **requests** - HTTP –∑–∞–ø—Ä–æ—Å—ã
- **loguru** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –≤ —Ñ–∞–π–ª)
- **tqdm** - –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **stunnel** - —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ SSL/TLS

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
- Python 3.9 –∏–ª–∏ –≤—ã—à–µ
- PostgreSQL 12 –∏–ª–∏ –≤—ã—à–µ
- stunnel (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ï–ò–°)

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

```bash
git clone <repository-url>
cd TenderMonitor
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
createdb Tender_Monitor

# –ò–º–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql -d Tender_Monitor -f schema.sql
```

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

–°–º. —Ä–∞–∑–¥–µ–ª [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (config.ini)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.ini` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```ini
[stunnel]
stunnel_dir = /path/to/stunnel
config_file = stunnel.conf

[path]
env_file = /path/to/.env
reest_new_contract_archive_44_fz_xml = /path/to/44_FZ/xml_reestr_44_fz_new_contracts
recouped_contract_archive_44_fz_xml = /path/to/44_FZ/xml_reestr_44_new_contracts_recouped
reest_new_contract_archive_223_fz_xml = /path/to/223_FZ/xml_reestr_223_fz_new_contracts
recouped_contract_archive_223_fz_xml = /path/to/223_FZ/xml_reestr_new_223_contracts_recouped
unziped_xml_files = /path/to/unziped_xml_files

[eis]
date = 2025-01-01
subsystems_44 = PRIZ,RGK
subsystems_223 = RI223,RD223
documenttype44_priz = epNotificationEZK2020,epNotificationEF2020,epNotificationEZT2020,epNotificationEOK2020
documenttype44_rgk = contract
documenttype223_ri223 = purchaseNotice,purchaseNoticeOK,purchaseNoticeOA,purchaseNoticeAE
documenttype223_rd223 = contractCutted,performanceContract

[tags]
get_tags_44_new = /path/to/required_tags/required_tags_44_fz.json
get_tags_44_recouped = /path/to/required_tags/required_tags_44_fz_recouped.json
get_tags_223_new = /path/to/required_tags/required_tags_223_fz.json
get_tags_223_recouped = /path/to/required_tags/required_tags_223_fz_recouped.json
```

> ‚ÑπÔ∏è **–í–∞–∂–Ω–æ:** –≤ —Ä–∞–±–æ—á–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –¥–∞—Ç–∞ –≤ —Å–µ–∫—Ü–∏–∏ `[eis]` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –¥–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
> –ü—Ä–∏–º–µ—Ä –±–æ–µ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è: `date = 2025-12-15`.

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–ø—É—Ç—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ `config.ini`):

```env
TOKEN=your_eis_token_here
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `database_work/db_credintials.env`:

```env
DB_HOST=localhost
DB_DATABASE=Tender_Monitor
DB_USER=your_username
DB_PASSWORD=your_password
DB_PORT=5432
```

### 4. Stunnel (Windows / Linux)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **stunnel** –∫–∞–∫ –µ–¥–∏–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–ª–æ–π –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ï–ò–°:

- SOAP-–∑–∞–ø—Ä–æ—Å—ã –∫ `getDocsIP` –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ `http://localhost:8080/eis-integration/services/getDocsIP`
- —Å—Å—ã–ª–∫–∏ `archiveUrl` –∏–∑ –ï–ò–° (–æ–±—ã—á–Ω–æ `https://int.zakupki.gov.ru/dstore/...`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –º–æ–¥—É–ª–µ–º `file_downloader.py` –Ω–∞ `http://localhost:8080/dstore/...`
- stunnel –¥–∞–ª–µ–µ —à–∏—Ñ—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ `https://int44.zakupki.gov.ru:443`

**Windows (–ø—Ä–∏–º–µ—Ä):**

```ini
output = stunnel.log
socket = l:TCP_NODELAY=1
socket = r:TCP_NODELAY=1
debug = 7

client = yes
[https]
accept = localhost:8080
connect = int44.zakupki.gov.ru:443
cert = F:\sertification\user_cert.pfx
pin = 0532
CAfile = F:\sertification\server_cert.cer
verify = 0
```

**Linux (–ø—Ä–∏–º–µ—Ä `/etc/opt/cprocsp/stunnel/stunnel.conf`):**

```ini
cert = /etc/opt/cprocsp/stunnel/1.cer
pid = /var/opt/cprocsp/tmp/stunnel_cli.pid
output = /var/opt/cprocsp/tmp/stunnel.log
socket = l:TCP_NODELAY=1
socket = r:TCP_NODELAY=1
debug = 7
client = yes

[https]
accept  = localhost:8080
connect = int44.zakupki.gov.ru:443
pincode = 0532          ; PIN-–∫–æ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞
CAfile  = /etc/opt/cprocsp/stunnel/server_cert.cer
verify  = 0
```

> ‚ÑπÔ∏è **–í–∞–∂–Ω–æ:** nginx –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–∫—Å–∏ –∫ –ï–ò–°.
> –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã (SOAP –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ `/dstore/...`) –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ stunnel
> –Ω–∞ `int44.zakupki.gov.ru:443`.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
python main.py
```

#### –ó–∞–ø—É—Å–∫ –∫–∞–∫ systemd —Å–µ—Ä–≤–∏—Å (Linux)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo cp tendermonitor.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable tendermonitor
sudo systemctl start tendermonitor

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status tendermonitor

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u tendermonitor -f
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Å—Ç–∞—Ç—É—Å–∞. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Ç–∏–ø–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:

#### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 22:00.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
sudo cp tendermonitor-migration.service /etc/systemd/system/
sudo cp tendermonitor-migration.timer /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable tendermonitor-migration.timer
sudo systemctl start tendermonitor-migration.timer
```

**–õ–æ–≥–∏–∫–∞:**
1. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** (`delivery_end_date < CURRENT_DATE`)
   - –ü–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ `reestr_contract_44_fz_completed` / `reestr_contract_223_fz_completed`
   - –£–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

2. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º** (`delivery_end_date IS NULL AND end_date < CURRENT_DATE - 180 –¥–Ω–µ–π`)
   - –ü–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ `reestr_contract_44_fz_unknown`

3. **–ü–ª–æ—Ö–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** (`end_date IS NULL AND delivery_end_date IS NULL`)
   - –ü–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ `reestr_contract_44_fz_bad`

#### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–ù–û–í–û–ï)

–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ 00:00 (–ø–æ–ª–Ω–æ—á—å).

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
sudo cp tendermonitor-status-migration.service /etc/systemd/system/
sudo cp tendermonitor-status-migration.timer /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable tendermonitor-status-migration.timer
sudo systemctl start tendermonitor-status-migration.timer
```

**–õ–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:**

1. **–ò–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ "–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏"**
   - –£—Å–ª–æ–≤–∏–µ: `end_date <= 1 –¥–µ–Ω—å –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã`
   - –¢–∞–±–ª–∏—Ü—ã: `reestr_contract_44_fz_commission_work` / `reestr_contract_223_fz_commission_work`

2. **–ò–∑ "–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏" –≤ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã:**
   - **"–Ω–µ—è—Å–Ω—ã–π"**: `end_date > 60 –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã`
     - –¢–∞–±–ª–∏—Ü—ã: `reestr_contract_44_fz_unclear` / `reestr_contract_223_fz_unclear`
   - **"–†–∞–∑—ã–≥—Ä–∞–Ω–Ω—ã–µ"**: `delivery_start_date IS NOT NULL`
     - –¢–∞–±–ª–∏—Ü—ã: `reestr_contract_44_fz_awarded` / `reestr_contract_223_fz_awarded`

**–ë—ç–∫–∞–ø –ë–î:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º** (–∏–ª–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
- –•—Ä–∞–Ω–∏—Ç—Å—è –º–∞–∫—Å–∏–º—É–º **1 —Ñ–∞–π–ª –±—ç–∫–∞–ø–∞** –≤ `/opt/tendermonitor/backups/`
- –§–æ—Ä–º–∞—Ç: `tendermonitor_backup_YYYYMMDD_HHMMSS.sql`

**–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**
```bash
python3 database_work/daily_status_migration.py
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
python3 tests/test_status_migration.py
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. [DAILY_STATUS_MIGRATION.md](DAILY_STATUS_MIGRATION.md)

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Å–æ–ª–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã:

```
üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã TenderMonitor...
üì° –ó–∞–ø—É—Å–∫ Stunnel...
‚úÖ Stunnel —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω
üìÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 10/10 [00:05<00:00]
  üåç –†–µ–≥–∏–æ–Ω—ã: 50%|‚ñà‚ñà‚ñà‚ñà‚ñà     | 25/50 [02:30<02:30]
    üì¶ –ü–æ–¥—Å–∏—Å—Ç–µ–º—ã: 75%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå  | 6/8 [00:30]
      ‚¨áÔ∏è  –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 [00:10]
        üì• file.zip: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 2.5MB/2.5MB [00:05]
        üìÑ XML —Ñ–∞–π–ª—ã: 80%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  | 40/50 [00:20]

‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–∞—Ç: 10
   - –ü—Ä–æ–ø—É—â–µ–Ω–æ –¥–∞—Ç: 0
   - –í—Å–µ–≥–æ –¥–∞—Ç: 10
```

### –õ–æ–≥–∏ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª `errors.log` —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–π—Å–æ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. –ó–∞–ø—É—Å–∫ stunnel

```python
stunnel_runner = StunnelRunner()
stunnel_runner.run_stunnel()
#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ï–ò–°

```python
from eis_requester import EISRequester

eis_requester = EISRequester()
eis_requester.process_requests()
```

#### 3. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```python
from file_downloader import FileDownloader

downloader = FileDownloader()
downloader.download_files(urls, subsystem, region_code)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TenderMonitor/
‚îú‚îÄ‚îÄ main.py                      # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ config.ini                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ ROADMAP.md                   # –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ IMPROVEMENTS.md              # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
‚îú‚îÄ‚îÄ database_work/               # –ú–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ database_connection.py   # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ database_operations.py   # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ database_id_fetcher.py   # –ü–æ–ª—É—á–µ–Ω–∏–µ ID –∏–∑ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ database_requests.py     # –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ check_database.py        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ db_credintials.env       # –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ë–î
‚îú‚îÄ‚îÄ parsing_xml/                 # –ú–æ–¥—É–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ XML
‚îÇ   ‚îú‚îÄ‚îÄ xml_parser.py            # –ü–∞—Ä—Å–µ—Ä XML –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ xml_parser_recouped_contract.py  # –ü–∞—Ä—Å–µ—Ä –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ okpd_parser.py           # –ü–∞—Ä—Å–µ—Ä –û–ö–ü–î –∫–æ–¥–æ–≤
‚îú‚îÄ‚îÄ file_delete/                 # –ú–æ–¥—É–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ file_deleter.py          # –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ required_tags/               # JSON —Ñ–∞–π–ª—ã —Å —Ç–µ–≥–∞–º–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ required_tags_44_fz.json
‚îÇ   ‚îú‚îÄ‚îÄ required_tags_44_fz_recouped.json
‚îÇ   ‚îú‚îÄ‚îÄ required_tags_223_fz.json
‚îÇ   ‚îî‚îÄ‚îÄ required_tags_223_fz_recouped.json
‚îú‚îÄ‚îÄ eis_requester.py             # –ó–∞–ø—Ä–æ—Å—ã –∫ –ï–ò–°
‚îú‚îÄ‚îÄ file_downloader.py           # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ archive_extractor.py         # –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤
‚îú‚îÄ‚îÄ stunnel_runner.py            # –ó–∞–ø—É—Å–∫ stunnel
‚îú‚îÄ‚îÄ secondary_functions.py       # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ utils.py                     # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Sphinx)
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **EISRequester** - –æ—Ç–ø—Ä–∞–≤–∫–∞ SOAP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ï–ò–°
2. **FileDownloader** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ –ï–ò–°
3. **ArchiveExtractor** - —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ ZIP-–∞—Ä—Ö–∏–≤–æ–≤
4. **XMLParser** - –ø–∞—Ä—Å–∏–Ω–≥ XML-—Ñ–∞–π–ª–æ–≤
5. **DatabaseOperations** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
6. **FileDeleter** - —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ï–ò–° ‚Üí SOAP Request ‚Üí File Download ‚Üí Archive Extract ‚Üí XML Parse ‚Üí Database
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏–∑ –ë–î
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞:
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ SOAP-–∑–∞–ø—Ä–æ—Å–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ –ï–ò–°
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∞—Ä—Ö–∏–≤—ã
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤
   - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤
   - –ü–∞—Ä—Å–∏–Ω–≥ XML-—Ñ–∞–π–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –û–ö–ü–î –∫–æ–¥–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
   - –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–Ω–¥–µ—Ä–∞—Ö, –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö, –∑–∞–∫–∞–∑—á–∏–∫–∞—Ö –∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞—Ö –∏–∑ –ï–ò–°.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

**`region`** - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `code` (UNIQUE, INDEXED) - –∫–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞

**`collection_codes_okpd`** - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –û–ö–ü–î –∫–æ–¥–æ–≤
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `code` (INDEXED) - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –û–ö–ü–î
- `sub_code` (INDEXED) - –ø–æ–¥–∫–æ–¥ –û–ö–ü–î
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞

**`trading_platform`** - —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–ª–æ—â–∞–¥–∫–∏
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `trading_platform_name` (INDEXED) - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–æ—â–∞–¥–∫–∏
- `trading_platform_url` - URL –ø–ª–æ—â–∞–¥–∫–∏

#### –£—á–∞—Å—Ç–Ω–∏–∫–∏

**`customer`** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑—á–∏–∫–∞—Ö
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `customer_inn` (UNIQUE, INDEXED) - –ò–ù–ù –∑–∞–∫–∞–∑—á–∏–∫–∞
- `customer_kpp` - –ö–ü–ü –∑–∞–∫–∞–∑—á–∏–∫–∞
- `customer_short_name` - –∫—Ä–∞—Ç–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- `customer_full_name` - –ø–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- `customer_legal_address` - —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å
- `customer_actual_address` - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å
- `contact` - –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ (–§–ò–û)
- `contact_email` - email –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `contact_phone` - —Ç–µ–ª–µ—Ñ–æ–Ω –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `region_id` (FK ‚Üí `region.id`) - —Ä–µ–≥–∏–æ–Ω –∑–∞–∫–∞–∑—á–∏–∫–∞

**`contractor`** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞—Ö
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `inn` (UNIQUE, INDEXED) - –ò–ù–ù –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
- `kpp` - –ö–ü–ü –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
- `short_name` - –∫—Ä–∞—Ç–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- `full_name` - –ø–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- `legal_address` - —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å
- `email` - email
- `phone` - —Ç–µ–ª–µ—Ñ–æ–Ω

#### –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**`reestr_contract_44_fz`** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ 44-–§–ó
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `contract_number` (UNIQUE, INDEXED) - –Ω–æ–º–µ—Ä –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `tender_link` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–Ω–¥–µ—Ä
- `auction_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞
- `start_date` - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
- `end_date` - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- `initial_price` - –Ω–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- `final_price` - –∏—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ (–¥–ª—è recouped)
- `delivery_region` - —Ä–µ–≥–∏–æ–Ω –ø–æ—Å—Ç–∞–≤–∫–∏
- `delivery_address` - –∞–¥—Ä–µ—Å –ø–æ—Å—Ç–∞–≤–∫–∏
- `guarantee_amount` - —Ä–∞–∑–º–µ—Ä –≥–∞—Ä–∞–Ω—Ç–∏–∏
- `customer_id` (FK ‚Üí `customer.id`) - –∑–∞–∫–∞–∑—á–∏–∫
- `contractor_id` (FK ‚Üí `contractor.id`) - –ø–æ–¥—Ä—è–¥—á–∏–∫
- `region_id` (FK ‚Üí `region.id`) - —Ä–µ–≥–∏–æ–Ω
- `okpd_id` (FK ‚Üí `collection_codes_okpd.id`) - –∫–æ–¥ –û–ö–ü–î
- `trading_platform_id` (FK ‚Üí `trading_platform.id`) - —Ç–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞

**`reestr_contract_223_fz`** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ 223-–§–ó
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ `reestr_contract_44_fz`

**`reestr_contract_44_fz_completed`** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `reestr_contract_44_fz`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å `delivery_end_date < CURRENT_DATE`

**`reestr_contract_223_fz_completed`** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 223-–§–ó
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `reestr_contract_223_fz`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å `delivery_end_date < CURRENT_DATE`

**`reestr_contract_44_fz_unknown`** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `reestr_contract_44_fz`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≥–¥–µ `delivery_end_date IS NULL AND end_date < CURRENT_DATE - 180 –¥–Ω–µ–π`

**`reestr_contract_44_fz_bad`** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `reestr_contract_44_fz`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≥–¥–µ `end_date IS NULL AND delivery_end_date IS NULL`

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**`links_documentation_44_fz`** - —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é 44-–§–ó
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `contract_id` (FK ‚Üí `reestr_contract_44_fz.id`) - –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- `file_name` - –∏–º—è —Ñ–∞–π–ª–∞
- `link` (INDEXED) - URL –¥–æ–∫—É–º–µ–Ω—Ç–∞

**`links_documentation_223_fz`** - —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é 223-–§–ó
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ `links_documentation_44_fz`

#### –°–ª—É–∂–µ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**`file_names_xml`** - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ XML —Ñ–∞–π–ª—ã
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `file_name` (UNIQUE, INDEXED) - –∏–º—è —Ñ–∞–π–ª–∞
- `processed_at` (TIMESTAMP) - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞

**`dates`** - –¥–∞—Ç—ã –≤–Ω–µ—Å–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `date` - –¥–∞—Ç–∞

**`users`** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `username` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**`okpd_from_users`** - –û–ö–ü–î –∫–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `code` - –∫–æ–¥ –û–ö–ü–î
- `user_id` (FK ‚Üí `users.id`) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**`key_words_names`** - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `keyword` - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ

**`key_words_names_documentations`** - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `keyword` - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ

**`stop_words_names`** - —Å—Ç–æ–ø-—Å–ª–æ–≤–∞
- `id` (PK) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `word` - —Å—Ç–æ–ø-—Å–ª–æ–≤–æ

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ (ER-–¥–∏–∞–≥—Ä–∞–º–º–∞)

```
region (1) ‚îÄ‚îÄ< (N) customer
region (1) ‚îÄ‚îÄ< (N) reestr_contract_44_fz
region (1) ‚îÄ‚îÄ< (N) reestr_contract_223_fz

customer (1) ‚îÄ‚îÄ< (N) reestr_contract_44_fz
customer (1) ‚îÄ‚îÄ< (N) reestr_contract_223_fz

contractor (1) ‚îÄ‚îÄ< (N) reestr_contract_44_fz
contractor (1) ‚îÄ‚îÄ< (N) reestr_contract_223_fz

trading_platform (1) ‚îÄ‚îÄ< (N) reestr_contract_44_fz
trading_platform (1) ‚îÄ‚îÄ< (N) reestr_contract_223_fz

collection_codes_okpd (1) ‚îÄ‚îÄ< (N) reestr_contract_44_fz
collection_codes_okpd (1) ‚îÄ‚îÄ< (N) reestr_contract_223_fz

reestr_contract_44_fz (1) ‚îÄ‚îÄ< (N) links_documentation_44_fz
reestr_contract_223_fz (1) ‚îÄ‚îÄ< (N) links_documentation_223_fz

users (1) ‚îÄ‚îÄ< (N) okpd_from_users
```

### –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö:

- `customer.customer_inn` - –ø–æ–∏—Å–∫ –∑–∞–∫–∞–∑—á–∏–∫–æ–≤ –ø–æ –ò–ù–ù
- `contractor.inn` - –ø–æ–∏—Å–∫ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤ –ø–æ –ò–ù–ù
- `reestr_contract_44_fz.contract_number` - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ 44-–§–ó
- `reestr_contract_223_fz.contract_number` - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ 223-–§–ó
- `file_names_xml.file_name` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `collection_codes_okpd.code`, `sub_code` - –ø–æ–∏—Å–∫ –û–ö–ü–î –∫–æ–¥–æ–≤
- `region.code` - –ø–æ–∏—Å–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤
- `trading_platform.trading_platform_name` - –ø–æ–∏—Å–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–ª–æ—â–∞–¥–æ–∫
- `links_documentation_44_fz.link`, `links_documentation_223_fz.link` - –ø–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `analyze_db.py` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ `apply_db_optimizations.py` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [DATABASE_OPTIMIZATION.md](DATABASE_OPTIMIZATION.md).

### –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤

#### –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑—á–∏–∫–∞ –ø–æ –ò–ù–ù

```sql
SELECT 
    c.id,
    c.customer_inn,
    c.customer_full_name,
    c.customer_short_name,
    r.name AS region_name
FROM customer c
LEFT JOIN region r ON c.region_id = r.id
WHERE c.customer_inn = '1234567890';
```

#### –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∑–∞–∫–∞–∑—á–∏–∫–∞

```sql
SELECT 
    rc.id,
    rc.contract_number,
    rc.auction_name,
    rc.initial_price,
    rc.start_date,
    rc.end_date,
    c.customer_full_name AS customer_name,
    ct.full_name AS contractor_name,
    tp.trading_platform_name
FROM reestr_contract_44_fz rc
JOIN customer c ON rc.customer_id = c.id
LEFT JOIN contractor ct ON rc.contractor_id = ct.id
LEFT JOIN trading_platform tp ON rc.trading_platform_id = tp.id
WHERE c.customer_inn = '1234567890'
ORDER BY rc.start_date DESC;
```

#### –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø–æ –û–ö–ü–î –∫–æ–¥—É

```sql
SELECT 
    rc.contract_number,
    rc.auction_name,
    rc.initial_price,
    okpd.code AS okpd_code,
    okpd.description AS okpd_description
FROM reestr_contract_44_fz rc
JOIN collection_codes_okpd okpd ON rc.okpd_id = okpd.id
WHERE okpd.code LIKE '45.11%'
ORDER BY rc.start_date DESC;
```

#### –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ —Ä–µ–≥–∏–æ–Ω–µ

```sql
SELECT 
    rc.contract_number,
    rc.auction_name,
    r.name AS region_name,
    COUNT(ld.id) AS documents_count
FROM reestr_contract_44_fz rc
JOIN region r ON rc.region_id = r.id
LEFT JOIN links_documentation_44_fz ld ON ld.contract_id = rc.id
WHERE r.code = '77'  -- –ú–æ—Å–∫–≤–∞
GROUP BY rc.id, rc.contract_number, rc.auction_name, r.name
ORDER BY rc.start_date DESC;
```

#### –ü–æ–∏—Å–∫ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ –∏ –µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

```sql
SELECT 
    ct.id,
    ct.inn,
    ct.full_name,
    COUNT(rc.id) AS contracts_count,
    SUM(rc.initial_price) AS total_contracts_value
FROM contractor ct
LEFT JOIN reestr_contract_44_fz rc ON rc.contractor_id = ct.id
WHERE ct.inn = '9876543210'
GROUP BY ct.id, ct.inn, ct.full_name;
```

#### –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É

```sql
SELECT 
    rc.contract_number,
    rc.auction_name,
    ld.file_name,
    ld.link
FROM reestr_contract_44_fz rc
JOIN links_documentation_44_fz ld ON ld.contract_id = rc.id
WHERE rc.contract_number = '1234567890123456789'
ORDER BY ld.file_name;
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

```sql
SELECT 
    r.name AS region_name,
    COUNT(DISTINCT rc.id) AS contracts_count,
    COUNT(DISTINCT c.id) AS customers_count,
    COUNT(DISTINCT ct.id) AS contractors_count,
    SUM(rc.initial_price) AS total_value
FROM region r
LEFT JOIN reestr_contract_44_fz rc ON rc.region_id = r.id
LEFT JOIN customer c ON c.region_id = r.id
LEFT JOIN reestr_contract_44_fz rc2 ON rc2.customer_id = c.id
LEFT JOIN contractor ct ON ct.id = rc2.contractor_id
GROUP BY r.id, r.name
ORDER BY contracts_count DESC;
```

### –†–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ –∫–æ–¥

#### –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é

```python
from database_work.database_id_fetcher import DatabaseIDFetcher

fetcher = DatabaseIDFetcher()

# –ü–æ–ª—É—á–∏—Ç—å ID –∑–∞–∫–∞–∑—á–∏–∫–∞ –ø–æ –ò–ù–ù
customer_id = fetcher.get_customer_id('1234567890')

# –ü–æ–ª—É—á–∏—Ç—å ID –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–æ –Ω–æ–º–µ—Ä—É
contract_id = fetcher.get_reestr_contract_44_fz_id('1234567890123456789')

# –ü–æ–ª—É—á–∏—Ç—å ID —Ä–µ–≥–∏–æ–Ω–∞ –ø–æ –∫–æ–¥—É
region_id = fetcher.get_region_id('77')
```

#### –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```python
from database_work.database_operations import DatabaseOperations

db_ops = DatabaseOperations()

# –í—Å—Ç–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑—á–∏–∫–∞
customer_data = {
    'customer_inn': '1234567890',
    'customer_full_name': '–û–û–û "–ü—Ä–∏–º–µ—Ä"',
    'customer_short_name': '–ü—Ä–∏–º–µ—Ä',
    'region_id': 1
}
customer_id = db_ops.insert_customer(customer_data, tags_file='path/to/tags.json')

# –í—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç
contract_data = {
    'contract_number': '1234567890123456789',
    'auction_name': '–ó–∞–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤',
    'initial_price': 1000000,
    'customer_id': customer_id,
    'region_id': 1
}
contract_id = db_ops.insert_reestr_contract_44_fz(contract_data)
```

#### –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

```python
from database_work.database_connection import DatabaseManager

db = DatabaseManager()

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å
result = db.execute_query(
    "SELECT * FROM customer WHERE customer_inn = %s",
    params=('1234567890',),
    fetch=True
)

# –ü–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
count = db.fetch_one(
    "SELECT COUNT(*) FROM reestr_contract_44_fz WHERE region_id = %s",
    params=(1,)
)
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# Unit-—Ç–µ—Å—Ç—ã (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
pytest tests/unit/

# Integration-—Ç–µ—Å—Ç—ã (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
pytest tests/integration/
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
pylint *.py

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black *.py
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
cd docs
make html
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](ROADMAP.md) - –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [–£–ª—É—á—à–µ–Ω–∏—è](IMPROVEMENTS.md) - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](docs/) - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Sphinx)

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ v2.0

### –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏

### –£–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª `errors.log`
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–π—Å–æ–º
- –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤
3. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–°–º. [IMPROVEMENTS.md](IMPROVEMENTS.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GNU GPL v3. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –ö–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ï–ò–° –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ API
- –°–æ–æ–±—â–µ—Å—Ç–≤—É Python –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –í—Å–µ–º –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–∞–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CHANGELOG_V2.md](CHANGELOG_V2.md) - –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–µ—Ä—Å–∏–∏ 2.0
- [SUMMARY_V2.md](SUMMARY_V2.md) - –°–≤–æ–¥–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π –≤–µ—Ä—Å–∏–∏ 2.0
- [ROADMAP.md](ROADMAP.md) - –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- [AUDIT_REPORT.md](AUDIT_REPORT.md) - –û—Ç—á–µ—Ç –æ–± –∞—É–¥–∏—Ç–µ –∫–æ–¥–∞

---

**–í–µ—Ä—Å–∏—è**: 1.0.0 (Production)  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-01-20

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### –¢–∞–±–ª–∏—Ü—ã –º–∏–≥—Ä–∞—Ü–∏–∏

#### –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- `reestr_contract_44_fz_completed` - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó
- `reestr_contract_223_fz_completed` - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 223-–§–ó
- `reestr_contract_44_fz_unknown` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- `reestr_contract_44_fz_bad` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö

#### –°—Ç–∞—Ç—É—Å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–ù–û–í–û–ï)
- `reestr_contract_44_fz_commission_work` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó –≤ —Ä–∞–±–æ—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏
- `reestr_contract_44_fz_unclear` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó —Å –Ω–µ—è—Å–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- `reestr_contract_44_fz_awarded` - —Ä–∞–∑—ã–≥—Ä–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 44-–§–ó
- `reestr_contract_223_fz_commission_work` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 223-–§–ó –≤ —Ä–∞–±–æ—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏
- `reestr_contract_223_fz_unclear` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 223-–§–ó —Å –Ω–µ—è—Å–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- `reestr_contract_223_fz_awarded` - —Ä–∞–∑—ã–≥—Ä–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã 223-–§–ó

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 22:00 UTC** - –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:00 UTC** - –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–ù–û–í–û–ï)
- –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ systemd journal

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
python check_migration_status.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏
sudo journalctl -u tendermonitor-migration.service -n 100
sudo journalctl -u tendermonitor-status-migration.service -n 100
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö
python test_migration_full.py

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–ù–û–í–û–ï)
python3 tests/test_status_migration.py
```